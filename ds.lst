0001   0000             ;  D7-D4 D3 D2-D0    D7-D0
0002   0000             ;           A23-A21  A20-A13
0003   0000             ;   xxxx  L   yyy zzzzzzzz
0004   0000             ;
0005   0000             ;
0006   0000             ;
0007   0000             ;
0008   0000             ;
0009   0000             ;
0010   0000             ;
0011   0000             ;
0012   0000             ;
0013   0000             ;
0014   0000             ;
0015   0000             ;
0016   0000             ;
0017   0000             
0018   0000             
0019   0000             
0020   E000                     .ORG    0E000H
0021   E000             
0022   E000 C3 03 E0            JP      CSTART
0023   E003             CSTART:
0024   E003             ;-------------------------------
0025   E003             ; 32K RAM
0026   E003             ; ----- $0000-$1FFF
0027   E003 3E 00               LD      A,00000000B     ;
0028   E005 D3 F8               OUT     ($F8),A         ; lo addr (        A20-A13 )
0029   E007 3E 08               LD      A,00001000B     ; L,000000
0030   E009 D3 F8               OUT     ($F8),A         ; hi addr ( Local, A23-A21 )
0031   E00B             ; ----- $2000-$3FFF
0032   E00B 3E 01               LD      A,00000001B     ;
0033   E00D D3 F9               OUT     ($F9),A         ; lo addr (        A20-A13 )
0034   E00F 3E 08               LD      A,00001000B     ; L,002000
0035   E011 D3 F9               OUT     ($F9),A         ; hi addr ( Local, A23-A21 )
0036   E013             ; ----- $4000-$5FFF
0037   E013 3E 02               LD      A,00000010B     ;
0038   E015 D3 FA               OUT     ($FA),A         ; lo addr (        A20-A13 )
0039   E017 3E 08               LD      A,00001000B     ; L,004000
0040   E019 D3 FA               OUT     ($FA),A         ; hi addr ( Local, A23-A21 )
0041   E01B             ; ----- $6000-$7FFF
0042   E01B 3E 03               LD      A,00000011B     ;
0043   E01D D3 FB               OUT     ($FB),A         ; lo addr (        A20-A13 )
0044   E01F 3E 08               LD      A,00001000B     ; L,006000
0045   E021 D3 FB               OUT     ($FB),A         ; hi addr ( Local, A23-A21 )
0046   E023             
0047   E023             ;        JP      MM1
0048   E023             ;-------------------------------
0049   E023             ; CHECK WRITE/READ CYCLE FIRS 32k of ADDRESS SPACE
0050   E023             ;
0051   E023 21 00 00            LD      HL,0000H        ; Start of Video RAM
0052   E026             RAMLoop:
0053   E026 3E 55               LD      A, 55H
0054   E028 77                  LD      (HL),A
0055   E029 BE                  CP      (HL)
0056   E02A C2 37 E0            JP      NZ, EndOfRAM
0057   E02D 23                  INC     HL
0058   E02E 7C                  LD      A, H
0059   E02F FE 80               CP      80H
0060   E031 C2 26 E0            JP      NZ, RAMLoop
0061   E034 C3 40 E0            JP      MM1
0062   E037             EndOfRAM:
0063   E037 7C                  LD      A, H
0064   E038 FE 80               CP      80H
0065   E03A C2 B2 E2            JP      NZ, MM3
0066   E03D C3 86 E2            JP      MM2
0067   E040             
0068   E040             MM1:
0069   E040             
0070   E040             ;-------------------------------
0071   E040             ; 24K VIDEO RAM (00000h - 05FFFh) ( 0000h-2FFFh 16bits wide )
0072   E040             ;                                   000 0 0000 0000 0000 - 010 1 1111 1111 1111
0073   E040             ;                                    0000 0000 0000 0000 -  0010 1111 1111 1111
0074   E040             ; ----- $8000-$9FFF
0075   E040 3E F0               LD      A,11110000B     ;
0076   E042 D3 FC               OUT     ($FC),A         ; lo addr (        A20-A13 )
0077   E044             ; ----- $A000-$BFFF
0078   E044 3E F1               LD      A,11110001B     ;
0079   E046 D3 FD               OUT     ($FD),A         ; lo addr (        A20-A13 )
0080   E048             ; ----- $C000-$DFFF
0081   E048 3E F2               LD      A,11110010B     ;
0082   E04A D3 FE               OUT     ($FE),A         ; lo addr (        A20-A13 )
0083   E04C             
0084   E04C             ;
0085   E04C 21 00 80            LD      HL,8000H        ; Start of Video RAM
0086   E04F F9                  LD      SP,HL 
0087   E050             
0088   E050 21 00 80            LD      HL,8000H        ; Start of Video RAM
0089   E053 0E 2F               LD      C,00101111B     ; Color 
0090   E055             ;
0091   E055             ; FIRST LINE
0092   E055             ;
0093   E055 3E C9               LD      A,11001001B     ; 
0094   E057 77                  LD      (HL),A          ;
0095   E058 23                  INC     HL              ;
0096   E059             
0097   E059 71                  LD      (HL),C          ;
0098   E05A 23                  INC     HL              ;
0099   E05B             
0100   E05B 06 7E               LD      B,126
0101   E05D                     
0102   E05D 3E CD       ML1:    LD      A,11001101B     ;
0103   E05F 77                  LD      (HL),A          ;
0104   E060 23                  INC     HL              ;
0105   E061             
0106   E061 71                  LD      (HL),C          ;
0107   E062 23                  INC     HL              ;
0108   E063             
0109   E063 10 F8               DJNZ    ML1
0110   E065             
0111   E065 3E BB               LD      A,10111011B     ; 
0112   E067 77                  LD      (HL),A          ;
0113   E068 23                  INC     HL              ;
0114   E069             
0115   E069 71                  LD      (HL),C          ;
0116   E06A 24                  INC     H               ; add Y + 1
0117   E06B 24                  INC     H               ; add Y + 1
0118   E06C 2E 00               LD      L,0             ;
0119   E06E             ;
0120   E06E             ; 2 - 94 LINES
0121   E06E             ;
0122   E06E 16 5E               LD      D,94
0123   E070 1E 00               LD      E,00
0124   E072             
0125   E072             ML2:
0126   E072 3E BA               LD      A,10111010B     ; 
0127   E074 77                  LD      (HL),A          ;
0128   E075 23                  INC     HL              ;
0129   E076             
0130   E076 71                  LD      (HL),C          ;
0131   E077 23                  INC     HL              ;
0132   E078             
0133   E078 06 7E               LD      B,126
0134   E07A 7A                  LD      A,D
0135   E07B 93                  SUB     E               ;
0136   E07C 4F                  LD      C,A             ; Color 
0137   E07D 7B                  LD      A,E
0138   E07E             
0139   E07E             ML3:
0140   E07E 77                  LD      (HL),A          ;
0141   E07F 23                  INC     HL              ;
0142   E080 3C                  INC     A               ;
0143   E081             
0144   E081 71                  LD      (HL),C          ;
0145   E082 23                  INC     HL              ;
0146   E083 0C                  INC     C               ;
0147   E084             
0148   E084 10 F8               DJNZ    ML3
0149   E086             
0150   E086 3E BA               LD      A,10111010B     ; 
0151   E088 77                  LD      (HL),A          ;
0152   E089 23                  INC     HL              ;
0153   E08A             
0154   E08A 0E 2F               LD      C,00101111B     ; Color 
0155   E08C 71                  LD      (HL),C          ;
0156   E08D 24                  INC     H               ; add Y + 1
0157   E08E 2E 00               LD      L,0             ;
0158   E090             
0159   E090 1C                  INC     E
0160   E091 15                  DEC     D
0161   E092 C2 72 E0            JP      NZ,ML2
0162   E095             ;
0163   E095             ; LAST LINE
0164   E095             ;
0165   E095 3E C9               LD      A,11001001B     ; 
0166   E097 77                  LD      (HL),A          ;
0167   E098 23                  INC     HL              ;
0168   E099             
0169   E099 71                  LD      (HL),C          ;
0170   E09A 23                  INC     HL              ;
0171   E09B             
0172   E09B 06 7E               LD      B,126
0173   E09D                     
0174   E09D 3E CD       ML4:    LD      A,11001101B     ;
0175   E09F 77                  LD      (HL),A          ;
0176   E0A0 23                  INC     HL              ;
0177   E0A1             
0178   E0A1 71                  LD      (HL),C          ;
0179   E0A2 23                  INC     HL              ;
0180   E0A3             
0181   E0A3 10 F8               DJNZ    ML4
0182   E0A5             
0183   E0A5 3E BB               LD      A,10111011B     ; 
0184   E0A7 77                  LD      (HL),A          ;
0185   E0A8 23                  INC     HL              ;
0186   E0A9             
0187   E0A9 71                  LD      (HL),C          ;
0188   E0AA             ;
0189   E0AA             ;
0190   E0AA             ;
0191   E0AA 16 FF               LD      D,0FFH
0192   E0AC             ML21:
0193   E0AC             ML31:
0194   E0AC 00                  NOP
0195   E0AD 00                  NOP
0196   E0AE 00                  NOP
0197   E0AF 00                  NOP
0198   E0B0 00                  NOP
0199   E0B1 00                  NOP
0200   E0B2 00                  NOP
0201   E0B3 00                  NOP
0202   E0B4 00                  NOP
0203   E0B5 00                  NOP
0204   E0B6 00                  NOP
0205   E0B7 00                  NOP
0206   E0B8 00                  NOP
0207   E0B9 00                  NOP
0208   E0BA 00                  NOP
0209   E0BB 00                  NOP
0210   E0BC 10 EE               DJNZ    ML31
0211   E0BE             
0212   E0BE 15                  DEC     D
0213   E0BF C2 AC E0            JP      NZ,ML21
0214   E0C2             ;
0215   E0C2             ; CLEAR SCREEN
0216   E0C2             ;
0217   E0C2 21 00 81            LD      HL,8100H        ; Start of Video RAM
0218   E0C5 0E 2F               LD      C,00101111B     ; Color 
0219   E0C7             
0220   E0C7 16 08               LD      D,8
0221   E0C9             ML42:
0222   E0C9 3E BA               LD      A,10111010B     ; 
0223   E0CB 77                  LD      (HL),A          ;
0224   E0CC 23                  INC     HL              ;
0225   E0CD             
0226   E0CD 71                  LD      (HL),C          ;
0227   E0CE 23                  INC     HL              ;
0228   E0CF             
0229   E0CF 06 7E               LD      B,126
0230   E0D1                     
0231   E0D1 3E 20       ML41:   LD      A,00100000B     ;
0232   E0D3 77                  LD      (HL),A          ;
0233   E0D4 23                  INC     HL              ;
0234   E0D5             
0235   E0D5 71                  LD      (HL),C          ;
0236   E0D6 23                  INC     HL              ;
0237   E0D7             
0238   E0D7 10 F8               DJNZ    ML41
0239   E0D9             
0240   E0D9 3E BA               LD      A,10111010B     ; 
0241   E0DB 77                  LD      (HL),A          ;
0242   E0DC 23                  INC     HL              ;
0243   E0DD             
0244   E0DD 71                  LD      (HL),C          ;
0245   E0DE 24                  INC     H               ; add Y + 1
0246   E0DF 2E 00               LD      L,0             ;
0247   E0E1             
0248   E0E1 15                  DEC     D
0249   E0E2 C2 C9 E0            JP      NZ,ML42
0250   E0E5             ;
0251   E0E5             ; WRITE SCREEN
0252   E0E5             ;
0253   E0E5 21 10 82            LD      HL,8210H        ; Start of Video RAM
0254   E0E8 3E 74               LD      A,'t'
0255   E0EA 77                  LD      (HL),A          ;
0256   E0EB 23                  INC     HL              ;
0257   E0EC 23                  INC     HL              ;
0258   E0ED 3E 5A               LD      A,'Z'
0259   E0EF 77                  LD      (HL),A          ;
0260   E0F0 23                  INC     HL              ;
0261   E0F1 23                  INC     HL              ;
0262   E0F2 3E 38               LD      A,'8'
0263   E0F4 77                  LD      (HL),A          ;
0264   E0F5 23                  INC     HL              ;
0265   E0F6 23                  INC     HL              ;
0266   E0F7 3E 30               LD      A,'0'
0267   E0F9 77                  LD      (HL),A          ;
0268   E0FA 23                  INC     HL              ;
0269   E0FB 23                  INC     HL              ;
0270   E0FC 3E 20               LD      A,' '
0271   E0FE 77                  LD      (HL),A          ;
0272   E0FF 23                  INC     HL              ;
0273   E100 23                  INC     HL              ;
0274   E101 3E 43               LD      A,'C'
0275   E103 77                  LD      (HL),A          ;
0276   E104 23                  INC     HL              ;
0277   E105 23                  INC     HL              ;
0278   E106 3E 50               LD      A,'P'
0279   E108 77                  LD      (HL),A          ;
0280   E109 23                  INC     HL              ;
0281   E10A 23                  INC     HL              ;
0282   E10B 3E 55               LD      A,'U'
0283   E10D 77                  LD      (HL),A          ;
0284   E10E 23                  INC     HL              ;
0285   E10F 23                  INC     HL              ;
0286   E110 3E 20               LD      A,' '
0287   E112 77                  LD      (HL),A          ;
0288   E113 23                  INC     HL              ;
0289   E114 23                  INC     HL              ;
0290   E115 3E 61               LD      A,'a'
0291   E117 77                  LD      (HL),A          ;
0292   E118 23                  INC     HL              ;
0293   E119 23                  INC     HL              ;
0294   E11A 3E 74               LD      A,'t'
0295   E11C 77                  LD      (HL),A          ;
0296   E11D 23                  INC     HL              ;
0297   E11E 23                  INC     HL              ;
0298   E11F 3E 20               LD      A,' '
0299   E121 77                  LD      (HL),A          ;
0300   E122 23                  INC     HL              ;
0301   E123 23                  INC     HL              ;
0302   E124 3E 35               LD      A,'5'
0303   E126 77                  LD      (HL),A          ;
0304   E127 23                  INC     HL              ;
0305   E128 23                  INC     HL              ;
0306   E129 3E 4D               LD      A,'M'
0307   E12B 77                  LD      (HL),A          ;
0308   E12C 23                  INC     HL              ;
0309   E12D 23                  INC     HL              ;
0310   E12E 3E 48               LD      A,'H'
0311   E130 77                  LD      (HL),A          ;
0312   E131 23                  INC     HL              ;
0313   E132 23                  INC     HL              ;
0314   E133 3E 7A               LD      A,'z'
0315   E135 77                  LD      (HL),A          ;
0316   E136 23                  INC     HL              ;
0317   E137 23                  INC     HL              ;
0318   E138             
0319   E138 21 10 84            LD      HL,8410H        ; Start of Video RAM
0320   E13B 3E 53               LD      A,'S'
0321   E13D 77                  LD      (HL),A          ;
0322   E13E 23                  INC     HL              ;
0323   E13F 23                  INC     HL              ;
0324   E140 3E 44               LD      A,'D'
0325   E142 77                  LD      (HL),A          ;
0326   E143 23                  INC     HL              ;
0327   E144 23                  INC     HL              ;
0328   E145 3E 52               LD      A,'R'
0329   E147 77                  LD      (HL),A          ;
0330   E148 23                  INC     HL              ;
0331   E149 23                  INC     HL              ;
0332   E14A 3E 41               LD      A,'A'
0333   E14C 77                  LD      (HL),A          ;
0334   E14D 23                  INC     HL              ;
0335   E14E 23                  INC     HL              ;
0336   E14F 3E 4D               LD      A,'M'
0337   E151 77                  LD      (HL),A          ;
0338   E152 23                  INC     HL              ;
0339   E153 23                  INC     HL              ;
0340   E154 3E 20               LD      A,' '
0341   E156 77                  LD      (HL),A          ;
0342   E157 23                  INC     HL              ;
0343   E158 23                  INC     HL              ;
0344   E159 3E 77               LD      A,'w'
0345   E15B 77                  LD      (HL),A          ;
0346   E15C 23                  INC     HL              ;
0347   E15D 23                  INC     HL              ;
0348   E15E 3E 6F               LD      A,'o'
0349   E160 77                  LD      (HL),A          ;
0350   E161 23                  INC     HL              ;
0351   E162 23                  INC     HL              ;
0352   E163 3E 72               LD      A,'r'
0353   E165 77                  LD      (HL),A          ;
0354   E166 23                  INC     HL              ;
0355   E167 23                  INC     HL              ;
0356   E168 3E 6B               LD      A,'k'
0357   E16A 77                  LD      (HL),A          ;
0358   E16B 23                  INC     HL              ;
0359   E16C 23                  INC     HL              ;
0360   E16D 3E 20               LD      A,' '
0361   E16F 77                  LD      (HL),A          ;
0362   E170 23                  INC     HL              ;
0363   E171 23                  INC     HL              ;
0364   E172 3E 38               LD      A,'8'
0365   E174 77                  LD      (HL),A          ;
0366   E175 23                  INC     HL              ;
0367   E176 23                  INC     HL              ;
0368   E177 3E 4D               LD      A,'M'
0369   E179 77                  LD      (HL),A          ;
0370   E17A 23                  INC     HL              ;
0371   E17B 23                  INC     HL              ;
0372   E17C 3E 62               LD      A,'b'
0373   E17E 77                  LD      (HL),A          ;
0374   E17F 23                  INC     HL              ;
0375   E180 23                  INC     HL              ;
0376   E181             
0377   E181 21 10 86            LD      HL,8610H        ; Start of Video RAM
0378   E184 3E 56               LD      A,'V'
0379   E186 77                  LD      (HL),A          ;
0380   E187 23                  INC     HL              ;
0381   E188 23                  INC     HL              ;
0382   E189 3E 49               LD      A,'I'
0383   E18B 77                  LD      (HL),A          ;
0384   E18C 23                  INC     HL              ;
0385   E18D 23                  INC     HL              ;
0386   E18E 3E 44               LD      A,'D'
0387   E190 77                  LD      (HL),A          ;
0388   E191 23                  INC     HL              ;
0389   E192 23                  INC     HL              ;
0390   E193 3E 45               LD      A,'E'
0391   E195 77                  LD      (HL),A          ;
0392   E196 23                  INC     HL              ;
0393   E197 23                  INC     HL              ;
0394   E198 3E 4F               LD      A,'O'
0395   E19A 77                  LD      (HL),A          ;
0396   E19B 23                  INC     HL              ;
0397   E19C 23                  INC     HL              ;
0398   E19D 3E 20               LD      A,' '
0399   E19F 77                  LD      (HL),A          ;
0400   E1A0 23                  INC     HL              ;
0401   E1A1 23                  INC     HL              ;
0402   E1A2 3E 31               LD      A,'1'
0403   E1A4 77                  LD      (HL),A          ;
0404   E1A5 23                  INC     HL              ;
0405   E1A6 23                  INC     HL              ;
0406   E1A7 3E 32               LD      A,'2'
0407   E1A9 77                  LD      (HL),A          ;
0408   E1AA 23                  INC     HL              ;
0409   E1AB 23                  INC     HL              ;
0410   E1AC 3E 38               LD      A,'8'
0411   E1AE 77                  LD      (HL),A          ;
0412   E1AF 23                  INC     HL              ;
0413   E1B0 23                  INC     HL              ;
0414   E1B1 3E 78               LD      A,'x'
0415   E1B3 77                  LD      (HL),A          ;
0416   E1B4 23                  INC     HL              ;
0417   E1B5 23                  INC     HL              ;
0418   E1B6 3E 39               LD      A,'9'
0419   E1B8 77                  LD      (HL),A          ;
0420   E1B9 23                  INC     HL              ;
0421   E1BA 23                  INC     HL              ;
0422   E1BB 3E 36               LD      A,'6'
0423   E1BD 77                  LD      (HL),A          ;
0424   E1BE 23                  INC     HL              ;
0425   E1BF 23                  INC     HL              ;
0426   E1C0 3E 20               LD      A,' '
0427   E1C2 77                  LD      (HL),A          ;
0428   E1C3 23                  INC     HL              ;
0429   E1C4 23                  INC     HL              ;
0430   E1C5 3E 31               LD      A,'1'
0431   E1C7 77                  LD      (HL),A          ;
0432   E1C8 23                  INC     HL              ;
0433   E1C9 23                  INC     HL              ;
0434   E1CA 3E 36               LD      A,'6'
0435   E1CC 77                  LD      (HL),A          ;
0436   E1CD 23                  INC     HL              ;
0437   E1CE 23                  INC     HL              ;
0438   E1CF 3E 63               LD      A,'c'
0439   E1D1 77                  LD      (HL),A          ;
0440   E1D2 23                  INC     HL              ;
0441   E1D3 23                  INC     HL              ;
0442   E1D4 3E 6F               LD      A,'o'
0443   E1D6 77                  LD      (HL),A          ;
0444   E1D7 23                  INC     HL              ;
0445   E1D8 23                  INC     HL              ;
0446   E1D9 3E 6C               LD      A,'l'
0447   E1DB 77                  LD      (HL),A          ;
0448   E1DC 23                  INC     HL              ;
0449   E1DD 23                  INC     HL              ;
0450   E1DE 3E 6F               LD      A,'o'
0451   E1E0 77                  LD      (HL),A          ;
0452   E1E1 23                  INC     HL              ;
0453   E1E2 23                  INC     HL              ;
0454   E1E3 3E 72               LD      A,'r'
0455   E1E5 77                  LD      (HL),A          ;
0456   E1E6 23                  INC     HL              ;
0457   E1E7 23                  INC     HL              ;
0458   E1E8 3E 73               LD      A,'s'
0459   E1EA 77                  LD      (HL),A          ;
0460   E1EB 23                  INC     HL              ;
0461   E1EC 23                  INC     HL              ;
0462   E1ED             
0463   E1ED             ;
0464   E1ED             ;
0465   E1ED             ;
0466   E1ED 16 FF               LD      D,0FFH
0467   E1EF             ML61:
0468   E1EF             ML51:
0469   E1EF 00                  NOP
0470   E1F0 00                  NOP
0471   E1F1 00                  NOP
0472   E1F2 00                  NOP
0473   E1F3 00                  NOP
0474   E1F4 00                  NOP
0475   E1F5 00                  NOP
0476   E1F6 00                  NOP
0477   E1F7 00                  NOP
0478   E1F8 00                  NOP
0479   E1F9 00                  NOP
0480   E1FA 00                  NOP
0481   E1FB 00                  NOP
0482   E1FC 00                  NOP
0483   E1FD 00                  NOP
0484   E1FE 00                  NOP
0485   E1FF 10 EE               DJNZ    ML51
0486   E201             
0487   E201 15                  DEC     D
0488   E202 C2 EF E1            JP      NZ,ML61
0489   E205             
0490   E205 3E 01               LD      A,00000001B     ;
0491   E207 D3 F7               OUT     ($F7),A         ; Video ctrl reg - set scale x2
0492   E209             ;
0493   E209             ;
0494   E209             ;
0495   E209 16 FF               LD      D,0FFH
0496   E20B             ML62:
0497   E20B             ML52:
0498   E20B 00                  NOP
0499   E20C 00                  NOP
0500   E20D 00                  NOP
0501   E20E 00                  NOP
0502   E20F 00                  NOP
0503   E210 00                  NOP
0504   E211 00                  NOP
0505   E212 00                  NOP
0506   E213 00                  NOP
0507   E214 00                  NOP
0508   E215 00                  NOP
0509   E216 00                  NOP
0510   E217 00                  NOP
0511   E218 00                  NOP
0512   E219 00                  NOP
0513   E21A 00                  NOP
0514   E21B 10 EE               DJNZ    ML52
0515   E21D             
0516   E21D 15                  DEC     D
0517   E21E C2 0B E2            JP      NZ,ML62
0518   E221             
0519   E221 3E 02               LD      A,00000010B     ;
0520   E223 D3 F7               OUT     ($F7),A         ; Video ctrl reg - set scale x4
0521   E225             ;
0522   E225             ;
0523   E225             ;
0524   E225 16 FF               LD      D,0FFH
0525   E227             ML63:
0526   E227             ML53:
0527   E227 00                  NOP
0528   E228 00                  NOP
0529   E229 00                  NOP
0530   E22A 00                  NOP
0531   E22B 00                  NOP
0532   E22C 00                  NOP
0533   E22D 00                  NOP
0534   E22E 00                  NOP
0535   E22F 00                  NOP
0536   E230 00                  NOP
0537   E231 00                  NOP
0538   E232 00                  NOP
0539   E233 00                  NOP
0540   E234 00                  NOP
0541   E235 00                  NOP
0542   E236 00                  NOP
0543   E237 10 EE               DJNZ    ML53
0544   E239             
0545   E239 15                  DEC     D
0546   E23A C2 27 E2            JP      NZ,ML63
0547   E23D             
0548   E23D 3E 10               LD      A,00010000B     ;
0549   E23F D3 F7               OUT     ($F7),A         ; Video ctrl reg - set scale x1, multy color 
0550   E241             ;
0551   E241             ;
0552   E241             ;
0553   E241 16 FF               LD      D,0FFH
0554   E243             ML64:
0555   E243             ML54:
0556   E243 00                  NOP
0557   E244 00                  NOP
0558   E245 00                  NOP
0559   E246 00                  NOP
0560   E247 00                  NOP
0561   E248 00                  NOP
0562   E249 00                  NOP
0563   E24A 00                  NOP
0564   E24B 00                  NOP
0565   E24C 00                  NOP
0566   E24D 00                  NOP
0567   E24E 00                  NOP
0568   E24F 00                  NOP
0569   E250 00                  NOP
0570   E251 00                  NOP
0571   E252 00                  NOP
0572   E253 10 EE               DJNZ    ML54
0573   E255             
0574   E255 15                  DEC     D
0575   E256 C2 43 E2            JP      NZ,ML64
0576   E259             
0577   E259 3E 00               LD      A,00000000B     ;
0578   E25B D3 F7               OUT     ($F7),A         ; Video ctrl reg - set scale x1, multy color 
0579   E25D             
0580   E25D 1E 80               LD      E,80h
0581   E25F 0E 01               LD      C,1
0582   E261             ML65:
0583   E261 16 04               LD      D,04h
0584   E263             ML55:
0585   E263 00                  NOP
0586   E264 00                  NOP
0587   E265 00                  NOP
0588   E266 00                  NOP
0589   E267 00                  NOP
0590   E268 00                  NOP
0591   E269 00                  NOP
0592   E26A 00                  NOP
0593   E26B 00                  NOP
0594   E26C 00                  NOP
0595   E26D 00                  NOP
0596   E26E 00                  NOP
0597   E26F 00                  NOP
0598   E270 00                  NOP
0599   E271 00                  NOP
0600   E272 00                  NOP
0601   E273 10 EE               DJNZ    ML55
0602   E275             
0603   E275 15                  DEC     D
0604   E276 C2 63 E2            JP      NZ,ML55
0605   E279             
0606   E279 79                  LD      A,C
0607   E27A D3 F5               OUT     ($F5),A         ; Video ctrl reg - set scale x1, multy color 
0608   E27C D3 F6               OUT     ($F6),A         ; Video ctrl reg - set scale x1, multy color 
0609   E27E 0C                  INC     C
0610   E27F 1D                  DEC     E
0611   E280 C2 61 E2            JP      NZ,ML65
0612   E283             
0613   E283 C3 03 E0            JP      CSTART
0614   E286             
0615   E286             MM2:
0616   E286             
0617   E286             ;-------------------------------
0618   E286             ; 24K VIDEO RAM (06000h - 0BFFFh) ( 3000h-5FFFh 16bits wide )
0619   E286             ;                                   0011 0000 0000 0000 - 0101 1111 1111 1111
0620   E286             ; ----- $8000-$9FFF
0621   E286 3E F0               LD      A,11110000B     ;
0622   E288 D3 F4               OUT     ($F4),A         ; lo addr (        A20-A13 )
0623   E28A 3E 0F               LD      A,00001111B     ; L,FE6000
0624   E28C D3 F4               OUT     ($F4),A         ; hi addr ( Local, A23-A21 )
0625   E28E             ; ----- $A000-$BFFF
0626   E28E 3E F1               LD      A,11110001B     ;
0627   E290 D3 F5               OUT     ($F5),A         ; lo addr (        A20-A13 )
0628   E292 3E 0F               LD      A,00001111B     ; L,FE8000
0629   E294 D3 F5               OUT     ($F5),A         ; hi addr ( Local, A23-A21 )
0630   E296             ; ----- $C000-$DFFF
0631   E296 3E F2               LD      A,11110010B     ;
0632   E298 D3 F6               OUT     ($F6),A         ; lo addr (        A20-A13 )
0633   E29A 3E 0F               LD      A,00001111B     ; L,FEA000
0634   E29C D3 F6               OUT     ($F6),A         ; hi addr ( Local, A23-A21 )
0635   E29E             
0636   E29E             ;-------------------------------
0637   E29E             ; 8K ROM
0638   E29E             ; ----- $E000-$FFFF
0639   E29E             ;       LD      A,11110111B     ;
0640   E29E             ;       OUT     ($FF),A         ; lo addr (        A20-A13 )
0641   E29E             ;       LD      A,00001111B     ; L,FEE000
0642   E29E             ;       OUT     ($F7),A         ; hi addr ( Local, A23-A21 )
0643   E29E             
0644   E29E 21 00 80            LD      HL,8000H        ; Start of Video RAM
0645   E2A1             
0646   E2A1 3E D9       ML9:    LD      A,11011001B     ;
0647   E2A3 77                  LD      (HL),A          ;
0648   E2A4 23                  INC     HL              ;
0649   E2A5             
0650   E2A5 3E 87               LD      A,10000111B     ;
0651   E2A7 77                  LD      (HL),A          ;
0652   E2A8 23                  INC     HL              ;
0653   E2A9             
0654   E2A9 7C                  LD      A,H             ; Above address FFFF ?
0655   E2AA FE E0               CP      0E0H
0656   E2AC C2 A1 E2            JP      NZ,ML9       ; Yes - 64K RAM
0657   E2AF             
0658   E2AF C3 03 E0            JP      CSTART
0659   E2B2             
0660   E2B2             MM3:
0661   E2B2             
0662   E2B2             ;-------------------------------
0663   E2B2             ; 24K VIDEO RAM (0C000h - 11FFFh) ( 6000h-8FFFh 16bits wide )
0664   E2B2             ;                                   0110 0000 0000 0000 - 1000 1111 1111 1111
0665   E2B2             ; ----- $8000-$9FFF
0666   E2B2 3E F0               LD      A,11110000B     ;
0667   E2B4 D3 FC               OUT     ($FC),A         ; lo addr (        A20-A13 )
0668   E2B6             ;        LD      A,00001111B     ; L,FEC000
0669   E2B6             ;        OUT     ($F4),A         ; hi addr ( Local, A23-A21 )
0670   E2B6             ; ----- $A000-$BFFF
0671   E2B6 3E F1               LD      A,11110001B     ;
0672   E2B8 D3 FD               OUT     ($FD),A         ; lo addr (        A20-A13 )
0673   E2BA             ;        LD      A,00001111B     ; L,FEE000
0674   E2BA             ;        OUT     ($F5),A         ; hi addr ( Local, A23-A21 )
0675   E2BA             ; ----- $C000-$DFFF
0676   E2BA 3E F2               LD      A,11110010B     ;
0677   E2BC D3 FE               OUT     ($FE),A         ; lo addr (        A20-A13 )
0678   E2BE             ;        LD      A,00001111B     ; L,FF0000
0679   E2BE             ;        OUT     ($F6),A         ; hi addr ( Local, A23-A21 )
0680   E2BE             
0681   E2BE             ;-------------------------------
0682   E2BE             ; 8K ROM
0683   E2BE             ; ----- $E000-$FFFF
0684   E2BE             ;        LD      A,11110011B     ;
0685   E2BE             ;        OUT     ($FF),A         ; lo addr (        A20-A13 )
0686   E2BE             ;        LD      A,00001111B     ; L,FF6000
0687   E2BE             ;        OUT     ($F7),A         ; hi addr ( Local, A23-A21 )
0688   E2BE             
0689   E2BE 21 00 80            LD      HL,8000H        ; Start of Video RAM
0690   E2C1             
0691   E2C1 0E 5F               LD      C,01011111B     ;
0692   E2C3             
0693   E2C3 3E C9               LD      A,11001001B     ; 
0694   E2C5 77                  LD      (HL),A          ;
0695   E2C6 23                  INC     HL              ;
0696   E2C7             
0697   E2C7 71                  LD      (HL),C          ;
0698   E2C8 23                  INC     HL              ;
0699   E2C9             
0700   E2C9 06 7E               LD      B,126
0701   E2CB                     
0702   E2CB 3E CD       MLO1:   LD      A,11001101B     ;
0703   E2CD 77                  LD      (HL),A          ;
0704   E2CE 23                  INC     HL              ;
0705   E2CF             
0706   E2CF 71                  LD      (HL),C          ;
0707   E2D0 23                  INC     HL              ;
0708   E2D1             
0709   E2D1 10 F8               DJNZ    MLO1          ; Yes - 64K RAM
0710   E2D3             
0711   E2D3 3E BB               LD      A,10111011B     ; 
0712   E2D5 77                  LD      (HL),A          ;
0713   E2D6 23                  INC     HL              ;
0714   E2D7             
0715   E2D7 71                  LD      (HL),C          ;
0716   E2D8 23                  INC     HL              ;
0717   E2D9             
0718   E2D9 16 5E               LD      D,94
0719   E2DB 1E 00               LD      E,00
0720   E2DD             
0721   E2DD             MLO2:
0722   E2DD 3E BA               LD      A,10111010B     ; 
0723   E2DF 77                  LD      (HL),A          ;
0724   E2E0 23                  INC     HL              ;
0725   E2E1             
0726   E2E1 71                  LD      (HL),C          ;
0727   E2E2 23                  INC     HL              ;
0728   E2E3             
0729   E2E3 06 7E               LD      B,126
0730   E2E5 7B                  LD      A,E
0731   E2E6             
0732   E2E6             MLO3:
0733   E2E6 77                  LD      (HL),A          ;
0734   E2E7 23                  INC     HL              ;
0735   E2E8 3C                  INC     A               ;
0736   E2E9             
0737   E2E9 71                  LD      (HL),C          ;
0738   E2EA 23                  INC     HL              ;
0739   E2EB             
0740   E2EB 10 F9               DJNZ    MLO3        ; Yes - 64K RAM
0741   E2ED             
0742   E2ED 3E BA               LD      A,10111010B     ; 
0743   E2EF 77                  LD      (HL),A          ;
0744   E2F0 23                  INC     HL              ;
0745   E2F1             
0746   E2F1 71                  LD      (HL),C          ;
0747   E2F2 23                  INC     HL              ;
0748   E2F3             
0749   E2F3 1D                  DEC     E
0750   E2F4 15                  DEC     D
0751   E2F5 C2 DD E2            JP      NZ,MLO2       ; Yes - 64K RAM
0752   E2F8             
0753   E2F8 3E C9               LD      A,11001001B     ; 
0754   E2FA 77                  LD      (HL),A          ;
0755   E2FB 23                  INC     HL              ;
0756   E2FC             
0757   E2FC 71                  LD      (HL),C          ;
0758   E2FD 23                  INC     HL              ;
0759   E2FE             
0760   E2FE 06 7E               LD      B,126
0761   E300                     
0762   E300 3E CD       MLO4:   LD      A,11001101B     ;
0763   E302 77                  LD      (HL),A          ;
0764   E303 23                  INC     HL              ;
0765   E304             
0766   E304 71                  LD      (HL),C          ;
0767   E305 23                  INC     HL              ;
0768   E306             
0769   E306 10 F8               DJNZ    MLO4          ; Yes - 64K RAM
0770   E308             
0771   E308 3E BB               LD      A,10111011B     ; 
0772   E30A 77                  LD      (HL),A          ;
0773   E30B 23                  INC     HL              ;
0774   E30C             
0775   E30C 71                  LD      (HL),C          ;
0776   E30D 23                  INC     HL              ;
0777   E30E             
0778   E30E C3 03 E0            JP      CSTART
0779   E311             
0780   E311             MM4:
0781   E311             
0782   E311             ;-------------------------------
0783   E311             ; 24K VIDEO RAM (18000h - 1DFFFh) ( C000h-EFFFh 16bits wide )
0784   E311             ;                                   1001 0000 0000 0000 - 1011 1111 1111 1111
0785   E311             ; ----- $8000-$9FFF
0786   E311 3E FC               LD      A,11111100B     ;
0787   E313 D3 FC               OUT     ($FC),A         ; lo addr (        A20-A13 )
0788   E315 3E 0F               LD      A,00001111B     ; L,FF8000
0789   E317 D3 F4               OUT     ($F4),A         ; hi addr ( Local, A23-A21 )
0790   E319             ; ----- $A000-$BFFF
0791   E319 3E FD               LD      A,11111101B     ;
0792   E31B D3 FD               OUT     ($FD),A         ; lo addr (        A20-A13 )
0793   E31D 3E 0F               LD      A,00001111B     ; L,FFA000
0794   E31F D3 F5               OUT     ($F5),A         ; hi addr ( Local, A23-A21 )
0795   E321             ; ----- $C000-$DFFF
0796   E321 3E FE               LD      A,11111110B     ;
0797   E323 D3 FE               OUT     ($FE),A         ; lo addr (        A20-A13 )
0798   E325 3E 0F               LD      A,00001111B     ; L,FFE000
0799   E327 D3 F6               OUT     ($F6),A         ; hi addr ( Local, A23-A21 )
0800   E329             
0801   E329             ;-------------------------------
0802   E329             ; 8K ROM
0803   E329             ; ----- $E000-$FFFF
0804   E329             ;        LD      A,11110111B     ;
0805   E329             ;        OUT     ($FF),A         ; lo addr (        A20-A13 )
0806   E329             ;        LD      A,00001111B     ; L,FFE000
0807   E329             ;        OUT     ($F7),A         ; hi addr ( Local, A23-A21 )
0808   E329             
0809   E329 21 00 80            LD      HL,8000H        ; Start of Video RAM
0810   E32C             
0811   E32C 3E D9       ML8:    LD      A,11011001B     ;
0812   E32E 77                  LD      (HL),A          ;
0813   E32F 23                  INC     HL              ;
0814   E330             
0815   E330 3E 07               LD      A,00000111B     ;
0816   E332 77                  LD      (HL),A          ;
0817   E333 23                  INC     HL              ;
0818   E334             
0819   E334 7C                  LD      A,H             ; Above address FFFF ?
0820   E335 FE E0               CP      0E0H
0821   E337 C2 2C E3            JP      NZ,ML8          ; Yes - 64K RAM
0822   E33A             
0823   E33A C3 03 E0            JP      CSTART
0824   E33D             
0825   E33D             MM5:
0826   E33D             
0827   E33D             ;-------------------------------
0828   E33D             ; 24K VIDEO RAM (12000h - 17FFFh) ( 9000h-BFFFh 16bits wide )
0829   E33D             ;                                   1001 0000 0000 0000 - 1011 1111 1111 1111
0830   E33D             ; ----- $8000-$9FFF
0831   E33D 3E F9               LD      A,11111001B     ;
0832   E33F D3 FC               OUT     ($FC),A         ; lo addr (        A20-A13 )
0833   E341 3E 0F               LD      A,00001111B     ; L,FF2000
0834   E343 D3 F4               OUT     ($F4),A         ; hi addr ( Local, A23-A21 )
0835   E345             ; ----- $A000-$BFFF
0836   E345 3E FA               LD      A,11111010B     ;
0837   E347 D3 FD               OUT     ($FD),A         ; lo addr (        A20-A13 )
0838   E349 3E 0F               LD      A,00001111B     ; L,FF4000
0839   E34B D3 F5               OUT     ($F5),A         ; hi addr ( Local, A23-A21 )
0840   E34D             ; ----- $C000-$DFFF
0841   E34D 3E FB               LD      A,11111011B     ;
0842   E34F D3 FE               OUT     ($FE),A         ; lo addr (        A20-A13 )
0843   E351 3E 0F               LD      A,00001111B     ; L,FF6000
0844   E353 D3 F6               OUT     ($F6),A         ; hi addr ( Local, A23-A21 )
0845   E355             
0846   E355             ;-------------------------------
0847   E355             ; 8K ROM
0848   E355             ; ----- $E000-$FFFF
0849   E355             ;        LD      A,11110111B     ;
0850   E355             ;        OUT     ($FF),A         ; lo addr (        A20-A13 )
0851   E355             ;        LD      A,00001111B     ; L,FFE000
0852   E355             ;        OUT     ($F7),A         ; hi addr ( Local, A23-A21 )
0853   E355             
0854   E355 21 00 80            LD      HL,8000H        ; Start of Video RAM
0855   E358             
0856   E358 3E D9       ML7:    LD      A,11011001B     ;
0857   E35A 77                  LD      (HL),A          ;
0858   E35B 23                  INC     HL              ;
0859   E35C             
0860   E35C 3E 07               LD      A,00000111B     ;
0861   E35E 77                  LD      (HL),A          ;
0862   E35F 23                  INC     HL              ;
0863   E360             
0864   E360 7C                  LD      A,H             ; Above address FFFF ?
0865   E361 FE E0               CP      0E0H
0866   E363 C2 58 E3            JP      NZ,ML7       ; Yes - 64K RAM
0867   E366             
0868   E366 C3 03 E0            JP      CSTART
0869   E369             
0870   E369             
0871   E369             .end
ADDR  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
-----------------------------------------------------
E000  C3 03 E0 3E 00 D3 F8 3E 08 D3 F8 3E 01 D3 F9 3E
E010  08 D3 F9 3E 02 D3 FA 3E 08 D3 FA 3E 03 D3 FB 3E
E020  08 D3 FB 21 00 00 3E 55 77 BE C2 37 E0 23 7C FE
E030  80 C2 26 E0 C3 40 E0 7C FE 80 C2 B2 E2 C3 86 E2
E040  3E F0 D3 FC 3E F1 D3 FD 3E F2 D3 FE 21 00 80 F9
E050  21 00 80 0E 2F 3E C9 77 23 71 23 06 7E 3E CD 77
E060  23 71 23 10 F8 3E BB 77 23 71 24 24 2E 00 16 5E
E070  1E 00 3E BA 77 23 71 23 06 7E 7A 93 4F 7B 77 23
E080  3C 71 23 0C 10 F8 3E BA 77 23 0E 2F 71 24 2E 00
E090  1C 15 C2 72 E0 3E C9 77 23 71 23 06 7E 3E CD 77
E0A0  23 71 23 10 F8 3E BB 77 23 71 16 FF 00 00 00 00
E0B0  00 00 00 00 00 00 00 00 00 00 00 00 10 EE 15 C2
E0C0  AC E0 21 00 81 0E 2F 16 08 3E BA 77 23 71 23 06
E0D0  7E 3E 20 77 23 71 23 10 F8 3E BA 77 23 71 24 2E
E0E0  00 15 C2 C9 E0 21 10 82 3E 74 77 23 23 3E 5A 77
E0F0  23 23 3E 38 77 23 23 3E 30 77 23 23 3E 20 77 23
E100  23 3E 43 77 23 23 3E 50 77 23 23 3E 55 77 23 23
E110  3E 20 77 23 23 3E 61 77 23 23 3E 74 77 23 23 3E
E120  20 77 23 23 3E 35 77 23 23 3E 4D 77 23 23 3E 48
E130  77 23 23 3E 7A 77 23 23 21 10 84 3E 53 77 23 23
E140  3E 44 77 23 23 3E 52 77 23 23 3E 41 77 23 23 3E
E150  4D 77 23 23 3E 20 77 23 23 3E 77 77 23 23 3E 6F
E160  77 23 23 3E 72 77 23 23 3E 6B 77 23 23 3E 20 77
E170  23 23 3E 38 77 23 23 3E 4D 77 23 23 3E 62 77 23
E180  23 21 10 86 3E 56 77 23 23 3E 49 77 23 23 3E 44
E190  77 23 23 3E 45 77 23 23 3E 4F 77 23 23 3E 20 77
E1A0  23 23 3E 31 77 23 23 3E 32 77 23 23 3E 38 77 23
E1B0  23 3E 78 77 23 23 3E 39 77 23 23 3E 36 77 23 23
E1C0  3E 20 77 23 23 3E 31 77 23 23 3E 36 77 23 23 3E
E1D0  63 77 23 23 3E 6F 77 23 23 3E 6C 77 23 23 3E 6F
E1E0  77 23 23 3E 72 77 23 23 3E 73 77 23 23 16 FF 00
E1F0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 10
E200  EE 15 C2 EF E1 3E 01 D3 F7 16 FF 00 00 00 00 00
E210  00 00 00 00 00 00 00 00 00 00 00 10 EE 15 C2 0B
E220  E2 3E 02 D3 F7 16 FF 00 00 00 00 00 00 00 00 00
E230  00 00 00 00 00 00 00 10 EE 15 C2 27 E2 3E 10 D3
E240  F7 16 FF 00 00 00 00 00 00 00 00 00 00 00 00 00
E250  00 00 00 10 EE 15 C2 43 E2 3E 00 D3 F7 1E 80 0E
E260  01 16 04 00 00 00 00 00 00 00 00 00 00 00 00 00
E270  00 00 00 10 EE 15 C2 63 E2 79 D3 F5 D3 F6 0C 1D
E280  C2 61 E2 C3 03 E0 3E F0 D3 F4 3E 0F D3 F4 3E F1
E290  D3 F5 3E 0F D3 F5 3E F2 D3 F6 3E 0F D3 F6 21 00
E2A0  80 3E D9 77 23 3E 87 77 23 7C FE E0 C2 A1 E2 C3
E2B0  03 E0 3E F0 D3 FC 3E F1 D3 FD 3E F2 D3 FE 21 00
E2C0  80 0E 5F 3E C9 77 23 71 23 06 7E 3E CD 77 23 71
E2D0  23 10 F8 3E BB 77 23 71 23 16 5E 1E 00 3E BA 77
E2E0  23 71 23 06 7E 7B 77 23 3C 71 23 10 F9 3E BA 77
E2F0  23 71 23 1D 15 C2 DD E2 3E C9 77 23 71 23 06 7E
E300  3E CD 77 23 71 23 10 F8 3E BB 77 23 71 23 C3 03
E310  E0 3E FC D3 FC 3E 0F D3 F4 3E FD D3 FD 3E 0F D3
E320  F5 3E FE D3 FE 3E 0F D3 F6 21 00 80 3E D9 77 23
E330  3E 07 77 23 7C FE E0 C2 2C E3 C3 03 E0 3E F9 D3
E340  FC 3E 0F D3 F4 3E FA D3 FD 3E 0F D3 F5 3E FB D3
E350  FE 3E 0F D3 F6 21 00 80 3E D9 77 23 3E 07 77 23
E360  7C FE E0 C2 58 E3 C3 03 E0 00 00 00 00 00 00 00


tasm: Number of errors = 0
